---
type: workflow
version: 1
name: InfluxDB CI
description: InfluxDB continuous build and test

inputs:
  parameters:
    COMMIT:
      default: "%%session.commit%%"
    REPO:
      default: "%%session.repo%%"



steps:
- CHECKOUT:
    template: argo-checkout
- INFLUXDB-BUILD:
    template: influxdb-build
    arguments:
      artifacts.CODE: "%%steps.CHECKOUT.outputs.artifacts.CODE%%"
- INFLUXDB-TEST-UNIT:
    template: influxdb-test-unit
    arguments:
      artifacts.CODE: "%%steps.CHECKOUT.outputs.artifacts.CODE%%"
- INFLUXDB-TEST-COV:
    template: influxdb-test-coverage
    arguments:
      artifacts.CODE: "%%steps.CHECKOUT.outputs.artifacts.CODE%%"

